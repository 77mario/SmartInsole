
void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* AdcHandle)
{
// TODO
char msg1[100];
uint16_t x1 = adc_buffer[0];
uint16_t y2 = adc_buffer[1];
uint16_t z3 = adc_buffer[2];
uint16_t rawValue = adc_buffer[3];

float x = (float)x1/4095*3.3;
float y = (float)y2/4095*3.3;
float z = (float)z3/4095*3.3;

float tens = (float)rawValue/4095*3.3;


sprintf(msg1, "X: %.2f Y:%.2f Z:%.2f V: %.2f RAW: %d \r\n", x,y,z,tens,rawValue);
HAL_UART_Transmit(&huart2, (uint8_t*)msg1, strlen(msg1), HAL_MAX_DELAY);

if(x<2100 && x>1900 && y>2000 && y<2200 && z>2400 && z<2500){
	  //HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5,GPIO_PIN_SET);

}
else{
	  //HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5,GPIO_PIN_RESET);

}
char *msg2 = "----------------------------------- \r\n";
HAL_UART_Transmit(&huart2, (uint8_t*) msg2, strlen(msg2), HAL_MAX_DELAY);

}